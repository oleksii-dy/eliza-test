import { Service, type Content, type IAgentRuntime, type Plugin, type UUID } from '@elizaos/core';
import type { MessageMetadata } from '@elizaos/api-client';
export interface MessageServiceMessage {
    id: UUID;
    channel_id: UUID;
    server_id: UUID;
    author_id: UUID;
    author_display_name?: string;
    content: string;
    raw_message?: unknown;
    source_id?: string;
    source_type?: string;
    in_reply_to_message_id?: UUID;
    created_at: number;
    metadata?: MessageMetadata;
}
export declare class MessageBusService extends Service {
    static serviceType: string;
    capabilityDescription: string;
    private boundHandleIncomingMessage;
    private boundHandleServerAgentUpdate;
    private boundHandleMessageDeleted;
    private boundHandleChannelCleared;
    private subscribedServers;
    constructor(runtime: IAgentRuntime);
    static start(runtime: IAgentRuntime): Promise<Service>;
    static stop(runtime: IAgentRuntime): Promise<void>;
    private connectToMessageBus;
    private validChannelIds;
    private fetchValidChannelIds;
    private getChannelParticipants;
    private fetchAgentServers;
    private handleServerAgentUpdate;
    private validateServerSubscription;
    private validateNotSelfMessage;
    private ensureWorldAndRoomExist;
    private ensureAuthorEntityExists;
    private createAgentMemory;
    handleIncomingMessage(data: unknown): Promise<void>;
    private handleMessageDeleted;
    private handleChannelCleared;
    private sendAgentResponseToBus;
    notifyActionStart(agentRoomId: UUID, agentWorldId: UUID, content: Content, messageId: UUID, inReplyToAgentMemoryId?: UUID, originalMessage?: MessageServiceMessage): Promise<Response | undefined>;
    notifyActionUpdate(agentRoomId: UUID, agentWorldId: UUID, content: Content, messageId: UUID, inReplyToAgentMemoryId?: UUID, originalMessage?: MessageServiceMessage): Promise<Response | undefined>;
    private notifyMessageComplete;
    private getAuthHeaders;
    getCentralMessageServerUrl(): string;
    stop(): Promise<void>;
}
export declare const messageBusConnectorPlugin: Plugin;
